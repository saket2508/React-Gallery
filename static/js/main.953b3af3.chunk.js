(this["webpackJsonpgallery-app"]=this["webpackJsonpgallery-app"]||[]).push([[0],{35:function(e,t,a){},40:function(e,t,a){},56:function(e,t,a){e.exports=a(81)},81:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),c=a.n(o),l=(a(35),a(17)),s=a(5),i=a.n(s),m=a(9),u=a(3),p=a(25),d=a(18);a(67),a(68),a(70);d.initializeApp({apiKey:"AIzaSyCeYtDEVJRW3VAzzFKf3DtN7MDDj8muyEo",authDomain:"my-gallery-app-686f4.firebaseapp.com",databaseURL:"https://my-gallery-app-686f4.firebaseio.com",projectId:"my-gallery-app-686f4",storageBucket:"my-gallery-app-686f4.appspot.com",messagingSenderId:"623036665787",appId:"1:623036665787:web:a68f6112d543d45056fe9e"});d.storage();var f=d.firestore(),g=d.auth(),b=(d.firestore.FieldValue.serverTimestamp,new d.auth.GoogleAuthProvider),h=function(){g.signInWithPopup(b)},E=function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n,r,o,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=f.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:if(e.sent.exists){e.next=16;break}return r=t.email,o=t.displayName,c=t.photoURL,e.prev=8,e.next=11,n.set(Object(p.a)({displayName:o,email:r,photoURL:c},a));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),console.error("Error creating user document",e.t0);case 16:return e.abrupt("return",v(t.uid));case 17:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(t,a){return e.apply(this,arguments)}}(),v=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,f.doc("users/".concat(t)).get();case 5:return a=e.sent,e.abrupt("return",Object(p.a)({uid:t},a.data()));case 9:e.prev=9,e.t0=e.catch(2),console.error("Error fetching user",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),y=(a(40),function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),s=Object(u.a)(c,2),p=s[0],d=s[1],f=Object(n.useState)(""),b=Object(u.a)(f,2),v=b[0],y=b[1],w=Object(n.useState)(null),x=Object(u.a)(w,2),N=x[0],j=x[1],O=Object(n.useState)(!1),S=Object(u.a)(O,2),k=S[0],C=S[1],I=Object(n.useState)(!1),P=Object(u.a)(I,2),W=P[0],D=P[1],z=function(){var e=Object(m.a)(i.a.mark((function e(t,a,n){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(k),e.prev=2,C(!0),e.next=6,g.createUserWithEmailAndPassword(a,n);case 6:r=e.sent,c=r.user,E(c,{displayName:v}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),j("Error Signing up with email and password"),console.log(e.t0),C(!1);case 16:o(""),d(""),y("");case 19:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a,n){return e.apply(this,arguments)}}(),L=function(e){var t=e.currentTarget,a=t.name,n=t.value;"userEmail"===a?o(n):"userPassword"===a?d(n):"displayName"===a&&y(n)};return r.a.createElement("div",{className:"SignUp"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{style:{marginTop:"50px"},className:"col-12 col-sm-6 mx-auto shadow bg-white rounded-lg"},r.a.createElement("form",{className:"px-4 py-4",noValidate:!0},r.a.createElement("div",{style:{fontSize:"22px",color:"#f48fb1",fontWeight:"600",letterSpacing:"1.0"},className:"text-center"},"PinGram"),r.a.createElement("div",{class:"form-group mt-2"},r.a.createElement("label",{style:{fontSize:"15px",fontWeight:"400"},for:"displayName"},"Display Name"),null===N&&r.a.createElement("input",{id:"custom2",type:"text",placeholder:"Eg: John Doe",name:"displayName",class:"form-control",onChange:function(e){return L(e)}}),N&&r.a.createElement("input",{id:"displayName",type:"text",placeholder:"Eg: John Doe",name:"displayName",class:"form-control is-invalid",onChange:function(e){return L(e)}})),r.a.createElement("div",{class:"form-group mt-4"},r.a.createElement("label",{style:{fontSize:"15px",fontWeight:"400"},for:"exampleInputEmail1"},"Email address"),null===N&&r.a.createElement("input",{id:"custom2",type:"email",placeholder:"Eg: john.doe@gmail.com",name:"userEmail",class:"form-control",onChange:function(e){return L(e)}}),N&&r.a.createElement("input",{type:"email",placeholder:"Eg: john.doe@gmail.com",name:"userEmail",class:"form-control is-invalid",id:"exampleInputEmail1",onChange:function(e){return L(e)}})),r.a.createElement("div",{class:"form-group mt-4"},r.a.createElement("label",{style:{fontSize:"15px",fontWeight:"400"},for:"exampleInputPassword1"},"Password"),null===N&&r.a.createElement("input",{id:"custom2",type:"password",class:"form-control",name:"userPassword",placeholder:"Your Password",onChange:function(e){return L(e)}}),N&&r.a.createElement("input",{type:"password",class:"form-control is-invalid",name:"userPassword",placeholder:"Your Password",id:"exampleInputPassword1",onChange:function(e){return L(e)}}),N&&r.a.createElement("div",{id:"exampleInputPassword1",className:"invalid-feedback"},"Enter all fields correctly")),!k&&r.a.createElement("button",{id:"signIn",style:{backgroundColor:"#66bb6a",color:"#fff"},type:"submit",className:"btn col-12 mt-2 mb-2",onClick:function(e){z(e,a,p)}},"Sign Up"),k&&r.a.createElement("button",{type:"button",className:"btn col-12 mt-2 mb-2",style:{backgroundColor:"#81c784",color:"#fff"},disabled:!0},r.a.createElement("span",{class:"spinner-grow spinner-grow-sm px-1",role:"status","aria-hidden":"true"}),"Loading..."),r.a.createElement("div",{className:"text-center"},"or"),!W&&r.a.createElement("button",{id:"signInWithGoogle",type:"submit",style:{backgroundColor:"#ef5350",color:"#fff"},className:"btn col-12 mt-2 mb-2",onClick:function(){try{D(!0),h()}catch(N){console.error("Error signing in with Google",N),D(!1)}}},"Sign In with Google",r.a.createElement("i",{class:"fab fa-google px-2"})),W&&r.a.createElement("button",{type:"button",style:{backgroundColor:"#ef5350",color:"#fff"},className:"btn col-12 mt-2 mb-2",disabled:!0},r.a.createElement("span",{className:"spinner-grow spinner-grow-sm px-2",role:"status","aria-hidden":"true"}),"Loading..."),r.a.createElement("p",{className:"text-center my-2"},"Already have an account?"," ",r.a.createElement(l.a,{to:"/",className:"text-primary"},"Sign in here")," ",r.a.createElement("br",null)," ")))))}),w=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),s=Object(u.a)(c,2),i=s[0],m=s[1],p=Object(n.useState)(null),d=Object(u.a)(p,2),f=d[0],b=d[1],E=Object(n.useState)(null),v=Object(u.a)(E,2),y=v[0],w=v[1],x=Object(n.useState)(!1),N=Object(u.a)(x,2),j=N[0],O=N[1],S=Object(n.useState)(!1),k=Object(u.a)(S,2),C=k[0],I=k[1],P=function(e){var t=e.currentTarget,a=t.name,n=t.value;"userEmail"===a?o(n):"userPassword"===a&&m(n)};return r.a.createElement("div",{className:"SignIn"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{style:{marginTop:"50px"},className:"col-12 col-sm-6 mx-auto shadow bg-white rounded-lg"},r.a.createElement("form",{className:"px-4 py-4",noValidate:!0},r.a.createElement("div",{style:{fontSize:"22px",color:"#f48fb1",fontWeight:"600",letterSpacing:"1.0"},className:"text-center"},"PinGram"),r.a.createElement("div",{className:"form-group mt-2"},r.a.createElement("label",{style:{fontWeight:"400",fontSize:"15px"},for:"exampleInputEmail1"},"Email address"),null===f&&null===y&&r.a.createElement("input",{type:"email",id:"custom2",name:"userEmail",placeholder:"Eg: john.doe@gmail.com",className:"form-control",onChange:function(e){return P(e)}}),(f||y)&&r.a.createElement("input",{type:"email",name:"userEmail",placeholder:"Eg: john.doe@gmail.com",className:"form-control is-invalid",id:"exampleInputEmail1",onChange:function(e){return P(e)}})),r.a.createElement("div",{class:"form-group mt-4"},r.a.createElement("label",{style:{fontWeight:"400",fontSize:"15px"},for:"exampleInputPassword1"},"Password"),null===f&&null===y&&r.a.createElement("input",{type:"password",id:"custom2",name:"userPassword",className:"form-control",placeholder:"Your Password",required:!0,onChange:function(e){return P(e)}}),(f||y)&&r.a.createElement("input",{type:"password",name:"userPassword",className:"form-control is-invalid",placeholder:"Your Password",id:"exampleInputPassword1",required:!0,onChange:function(e){return P(e)}}),f&&r.a.createElement("div",{id:"exampleInputPassword1",className:"invalid-feedback"},"Invalid username or password"),y&&r.a.createElement("div",{id:"exampleInputPassword1",className:"invalid-feedback"},"Enter all fields correctly")),!j&&r.a.createElement("button",{id:"signIn",style:{backgroundColor:"#66bb6a",color:"#fff"},type:"submit",className:"btn col-12 mt-2 mb-2",onClick:function(e){!function(e,t,a){e.preventDefault(),O(!0),g.signInWithEmailAndPassword(t,a).catch((function(e){O(!1),""===t||""===a?(w("Enter all fields correctly"),console.error("Error signing in with password and email",e)):(y&&w(null),b("Error signing in with password and email"),console.error("Error signing in with password and email",e))}))}(e,a,i)}},"Sign In"),j&&r.a.createElement("button",{style:{backgroundColor:"#66bb6a",color:"#fff"},type:"submit",className:"btn col-12 mt-2 mb-2",disabled:!0},r.a.createElement("span",{class:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"}),"Loading..."),r.a.createElement("div",{className:"text-center"},"or"),!C&&r.a.createElement("button",{type:"submit",id:"signInGoogle",style:{backgroundColor:"#ef5350",color:"#fff"},className:"btn col-12 mt-2 mb-2",onClick:function(){try{I(!0),h()}catch(f){console.error("Error signing in with Google",f),I(!1)}}},"Sign In with Google",r.a.createElement("i",{class:"fab fa-google px-2"})),C&&r.a.createElement("button",{style:{backgroundColor:"#ef5350",color:"#fff"},className:"btn col-12 mt-2 mb-2",disabled:!0},r.a.createElement("span",{className:"spinner-grow spinner-grow-sm pr-1",role:"status","aria-hidden":"true"}),"Loading..."),r.a.createElement("p",{className:"text-center my-2"},"Don't have an account?"," ",r.a.createElement(l.a,{to:"signUp",className:"text-primary"},"Sign up here")," ",r.a.createElement("br",null)," ",r.a.createElement(l.a,{to:"passwordReset",className:"text-primary"},"Forgot Password?"))))))},x=function(){return r.a.createElement("div",null)};function N(e){var t=e.userName,a=e.auth;return r.a.createElement("div",{className:"title"},r.a.createElement("div",{className:"navbar"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"PinGram"),r.a.createElement("div",{style:{marginTop:"-5px"},className:"header-icons"},r.a.createElement("div",{className:"icon"},r.a.createElement("i",{class:"fab fa-github"})),r.a.createElement("div",{className:"icon"},r.a.createElement("i",{class:"fab fa-twitter"})),r.a.createElement("div",{className:"icon"},r.a.createElement("i",{class:"fab fa-instagram"})),r.a.createElement("a",{class:"nav-link dropdown-toggle",id:"navbarDropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",style:{color:"#f48fb1",fontSize:"2rem;"}},r.a.createElement("i",{className:"fa fa-user"}),r.a.createElement("span",{className:"caret"})),r.a.createElement("div",{class:"dropdown-menu dropdown-menu-right","aria-labelledby":"navbarDropdownMenuLink"},r.a.createElement("a",{class:"dropdown-item",href:"#",onClick:function(){a.signOut()}},"Sign Out"))))),null!==t&&r.a.createElement("h2",null,"Welcome, ",t),null===t&&r.a.createElement("h2",null,"Welcome"),r.a.createElement("p",null,"Search free high-resolution photos"))}var j=function(e){var t=e.props;return r.a.createElement("div",{style:{marginBottom:"20px"},className:"col-9 col-md-6 mx-auto"},r.a.createElement("input",{id:"custom",className:"form-control",type:"text",placeholder:"California",value:t.term,onChange:function(e){return t.setTerm(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&""!=e.target.value&&t.search()}}))},O=a(24),S=function(e){var t=e.selectedImg,a=e.setSelectedImg;return r.a.createElement(O.a.div,{className:"backdrop",onClick:function(e){a(null)},initial:{opacity:0},animate:{opacity:1}},r.a.createElement(O.a.img,{src:t,alt:"enlarged pic",initial:{y:"-100vh"},animate:{y:0}}))},k=(a(48),a(47),a(100),a(49)),C=a(50),I=a(53),P=a(52),W=Object(n.createContext)({user:null}),D=function(e){Object(I.a)(a,e);var t=Object(P.a)(a);function a(){var e;Object(k.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={user:null},e.componentDidMount=Object(m.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g.onAuthStateChanged(function(){var t=Object(m.a)(i.a.mark((function t(a){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(a);case 2:n=t.sent,e.setState({user:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)}))),e}return Object(C.a)(a,[{key:"render",value:function(){return r.a.createElement(W.Provider,{value:this.state.user},this.props.children)}}]),a}(n.Component),z=(a(74),a(51)),L="https://pixabay.com/api/";var G=function(){var e=Object(n.useContext)(W),t=(e.photoURL,e.displayName),a=(e.email,"19529048-a0442e53b19277dfa094f6e1f"),o=Object(n.useState)(1),c=Object(u.a)(o,2),l=c[0],s=c[1],p=Object(n.useState)(!1),d=Object(u.a)(p,2),f=(d[0],d[1]),b=Object(n.useState)(null),h=Object(u.a)(b,2),E=h[0],v=h[1],y=Object(n.useState)(!1),w=Object(u.a)(y,2),x=w[0],O=(w[1],Object(n.useState)([])),k=Object(u.a)(O,2),C=k[0],I=k[1],P=Object(n.useState)(""),D=Object(u.a)(P,2),G=D[0],U=D[1];Object(n.useEffect)((function(){f(!0),fetch("".concat(L,"?key=").concat(a,"&q=California&image_type=photo")).then((function(e){return e.json()})).then((function(e){console.log(e),I(e.hits),f(!1)})).then((function(e){console.log(e),f(!1)}))}),[]);var A=function(){var e=Object(m.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(1),e.prev=1,f(!0),e.next=5,fetch("".concat(L,"?key=").concat(a,"&q=").concat(G,"&image_type=photo"));case 5:return t=e.sent,e.next=8,t.json();case 8:n=e.sent,console.log(n),I(n.hits),f(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0),f(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"app"},r.a.createElement(N,{userName:t,auth:g}),r.a.createElement(j,{props:{term:G,search:A,setTerm:U}}),x&&r.a.createElement("div",{className:"error"},"Error trying to load images"),r.a.createElement(z.a,{dataLength:C.length,next:function(){s(l+1),""===G?(f(!0),fetch("".concat(L,"?key=").concat(a,"&q=California&image_type=photo&page=").concat(l)).then((function(e){return e.json()})).then((function(e){console.log(e),I(C.concat(e.hits)),f(!1)}))):(f(!0),fetch("".concat(L,"?key=").concat(a,"&q=").concat(G,"&image_type=photo&page=").concat(l)).then((function(e){return e.json()})).then((function(e){console.log(e),I(C.concat(e.hits)),f(!1)})))},hasMore:!0,loader:r.a.createElement("div",null)},r.a.createElement("div",{className:"container-fluid mt-4",style:{overflow:"auto"}},r.a.createElement("div",{className:"card-columns"},C.map((function(e,t){return r.a.createElement("figure",{class:"figure"},r.a.createElement("img",{src:e.largeImageURL,class:"figure-img img-fluid rounded",alt:"..."}),r.a.createElement("figcaption",{class:"figure-caption"},e.tags.split(", ").map((function(e){return r.a.createElement("span",{className:"tag px-3 py-1 mr-2 rounded-pill"},"#",e)}))))}))))),E&&r.a.createElement(S,{selectedImg:E,setSelectedImg:v}))};function U(){var e=Object(n.useContext)(W);return console.log(e),e?r.a.createElement(G,null):r.a.createElement(l.b,null,r.a.createElement(y,{path:"signUp"}),r.a.createElement(w,{path:"/"}),r.a.createElement(x,{path:"passwordReset"}))}var A=function(){return r.a.createElement(D,null,r.a.createElement(U,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[56,1,2]]]);
//# sourceMappingURL=main.953b3af3.chunk.js.map